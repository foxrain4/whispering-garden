<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Whispering Garden</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Georgia', serif;
      background: linear-gradient(#1e1e1e, #2f2f2f);
      color: #f5f0e6;
      text-align: center;
      overflow: hidden;
    }
    h1 {
      font-size: 2.5em;
      margin-top: 1em;
      color: #d4e0d2;
      text-shadow: 1px 1px 3px #000;
    }
    #garden {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
    }
    .plant {
      background: radial-gradient(ellipse at center, #3d403f 0%, #1c1c1c 100%);
      border-radius: 1rem;
      padding: 1rem;
      cursor: pointer;
      transition: transform 0.2s;
      box-shadow: 0 0 8px #2a2a2a;
    }
    .plant:hover {
      transform: scale(1.05);
    }
    .symbol {
      font-size: 2.2rem;
      margin: 0.3em;
      opacity: 0.6;
      transition: opacity 0.3s, transform 0.2s;
    }
    .symbol.active {
      opacity: 1;
      transform: scale(1.3);
    }
    #message {
      font-style: italic;
      margin-top: 1.5rem;
      color: #b0e0cc;
    }
    .final-state {
  background: linear-gradient(#f0f8ff, #d6f5d6);
  animation: fadein 4s ease-in-out;
}

.final-message {
  text-align: center;
  font-size: 1.6rem;
  margin-top: 100px;
  color: #2a5c2a;
  line-height: 2em;
}

  </style>
</head>
<body>
  <h1>ğŸŒ¿ Whispering Garden ğŸŒ¿</h1>
  <div id="garden">
    <div class="plant" data-id="0">ğŸœ</div>
    <div class="plant" data-id="1">ğŸœ‚</div>
    <div class="plant" data-id="2">ğŸœƒ</div>
    <div class="plant" data-id="3">ğŸœ„</div>
    <div class="plant" data-id="4">ğŸ“</div>
    <div class="plant" data-id="5">ğŸœ</div>
  </div>
  <div id="message">Listen... they remember you.</div>
</body>
  <script>
const symbols = ['ğŸœ','ğŸœ‚','ğŸœƒ','ğŸœ„','ğŸ“','ğŸœ'];
const plants = document.querySelectorAll('.plant');
const message = document.getElementById('message');

let currentSequence = [];
let playerInput = [];
let level = 1;
let isPlayerTurn = false;
let plantMemory = 3;

function getRandomSymbol() {
  return symbols[Math.floor(Math.random() * symbols.length)];
}

function flash(symbol, duration = 700) {
  symbol.classList.add('active');
  setTimeout(() => {
    symbol.classList.remove('active');
  }, duration);
}

function playSequence() {
  isPlayerTurn = false;
  let delay = 0;
  message.textContent = `ğŸŒ± Remember the pattern... (Level ${level})`;

  currentSequence.forEach((symbolIndex, i) => {
    setTimeout(() => {
      flash(plants[symbolIndex]);
      chime(symbolIndex);
    }, delay);
    delay += 800;
  });

  setTimeout(() => {
    isPlayerTurn = true;
    message.textContent = 'ğŸŒ¾ Your turn. Tap the plants in order.';
  }, delay);
}

function chime(index) {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  osc.frequency.value = 300 + index * 50;
  osc.connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime + 0.2);
}

function growPlant() {
  level++;
  plantMemory = Math.min(3 + level, 9);
  currentSequence = [];
  for (let i = 0; i < plantMemory; i++) {
    currentSequence.push(Math.floor(Math.random() * plants.length));
  }
  playerInput = [];
  playSequence();
  checkEnding();
}

plants.forEach((plant, index) => {
  plant.addEventListener('click', () => {
    if (!isPlayerTurn) return;

    flash(plant, 300);
    chime(index);
    playerInput.push(index);

    const currentStep = playerInput.length - 1;

    if (playerInput[currentStep] !== currentSequence[currentStep]) {
      message.textContent = "ğŸŒ‘ The garden fades... You forgot.";
      setTimeout(() => resetGame(false), 1500);
      return;
    }

    if (playerInput.length === currentSequence.length) {
      message.textContent = "ğŸŒ¸ A new memory blooms...";
      setTimeout(() => growPlant(), 1200);
    }
  });
});

function resetGame(victory) {
  level = 1;
  currentSequence = [];
  playerInput = [];
  message.textContent = victory ? "ğŸŒ You remembered everything." : "ğŸŒ‘ Forgotten. Try again.";
  setTimeout(() => growPlant(), 2000);
}

growPlant(); // start game
    
const whispers = [
  "The garden remembers what you forget.",
  "In stillness, the petals speak.",
  "Some memories root deeper than thought.",
  "Listen closely... the wind carries echoes.",
  "With each bloom, a silence is understood.",
  "You are not the first to wander here.",
  "The soil dreams in symbols."
];

function showWhisper() {
  const w = whispers[Math.floor(Math.random() * whispers.length)];
  message.textContent = `ğŸŒ€ Whisper: â€œ${w}â€`;
}

function resetGame(victory) {
  level = 1;
  currentSequence = [];
  playerInput = [];

  if (victory) {
    message.textContent = "ğŸŒ You remembered everything. The garden opens.";
    document.body.classList.add('final-state');
    document.querySelector('#garden').innerHTML = `
      <div class="final-message">ğŸ•Šï¸<br/>You have become the memory.<br/>Peace surrounds you.<br/><br/>ğŸŒ¿ Thank you for listening.</div>
    `;
    return;
  }

  showWhisper();
  setTimeout(() => growPlant(), 2500);
}

// Optional ending if they reach a memory limit
function checkEnding() {
  if (level >= 12) {
    resetGame(true);
  }
}
</script>
</html>
